document.addEventListener('scroll', function () {
    const resultsPanel = document.querySelector('.results-panel');
    const lastQuestion = document.querySelector('.questionnaire-list .slider-question-row:last-child, .questionnaire-list .question-row:last-child');

    const lastQuestionBottom = lastQuestion.getBoundingClientRect().bottom;
    const viewportHeight = window.innerHeight;

    if (lastQuestionBottom <= viewportHeight + 20) { // Adjust the "+ 20" to delay the appearance slightly
        resultsPanel.classList.add('expanded');
    } else {
        resultsPanel.classList.remove('expanded');
    }
});